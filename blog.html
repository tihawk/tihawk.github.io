<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Blog | Kiril P. Blagoev</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kblagoev.com/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://kblagoev.com/img/logo.png"><meta data-rh="true" property="og:url" content="https://kblagoev.com/blog"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | Kiril P. Blagoev"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://kblagoev.com/blog"><link data-rh="true" rel="alternate" href="https://kblagoev.com/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://kblagoev.com/blog" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kiril P. Blagoev RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kiril P. Blagoev Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EZPFGQ1WWX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EZPFGQ1WWX",{})</script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7fa5119d.css">
<script src="/assets/js/runtime~main.77f4544e.js" defer="defer"></script>
<script src="/assets/js/main.54c6da57.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/apps">Apps</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/bootstrapping-a-pc-from-bios-the-monitor">The Monitor - Bootstrapping a PC from BIOS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/on-shebangs-being-funky">On shebangs, and their funky behaviour</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/winamp-github-repository-problems">The Winamp GitHub repository is seriously mismanaged. And there&#x27;s nothing they can do about it now.</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/using-stow-for-managing dotfiles">How I manage configuration files on my Linux machine using dotfiles and stow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/developing-on-android-emulator-from-virtualbox">How to connect to an Android Emulator from VirtualBox</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/how-to-remember-what-i-was-reading-about">How to remember what I was reading about?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/key-mission-cyberapocalypse-2021-ctf">Key Mission - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/input-as-a-service-cyberapocalypse-2021-ctf">Input as a Service - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/blitzprop-cyberapocalypse-2021-ctf">BlitzProp - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/caas-cyberapocalypse-2021-ctf">CaaS - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/cyber-apocalypse-2021-capture-the-flag-write-ups">Cyber Apocalypse 2021 Capture the Flag Write-ups</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/alien-camp-cyberapocalypse-2021-ctf">Alien Camp - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/authenticator-cyberapocalypse-2021-ctf">Authenticator - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/passphrase-cyberapocalypse-2021-ctf">Passphrase - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/inspector-gadget-cyberapocalypse-2021-ctf">Inspector Gadget - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ministrypalace-cyberapocalypse-2021-ctf">miniSTRypalace - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/e-tree-cyberapocalypse-2021-ctf">E.Tree - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/phasestream-3-cyberapocalypse-2021-ctf">Phasestream 3 - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/phasestream-4-cyberapocalypse-2021-ctf">Phasestream 4 - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/nintendo-base64-cyberapocalypse-2021-ctf">Nintendo Base64 - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/emoji-voting-cyberapocalypse-2021-ctf">Emoji Voting - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/soulcrabber-cyberapocalypse-2021-ctf">Soulcrabber - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/wild-goose-hunt-cyberapocalypse-2021-ctf">Wild goose hunt - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/phasestream-1-cyberapocalypse-2021-ctf">Phasestream 1- Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/phasestream-2-cyberapocalypse-2021-ctf">Phasestream 2 - Cyberapocalypse 2021 CTF</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/quantum-programming-abstraction-level-2-algorithms">Quantum Programming - Abstraction level 2: State Machine and Algorithms</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/quantum-programming-abstraction-level-1-logic-gates">Quantum Programming - Abstraction level 1: Logic Gates</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/quantum-programming-abstraction-level-0">Quantum Programming by abstracting ourselves from Quantum Mechanics: Abstraction level 0</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/astronavigation-coordinate-systems">Celestial Navigation - coordinate systems</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/on-approximating-irrational-numbers-as-fractions-algorithms">On approximating irrational numbers as fractions (algorithms)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/simulating-the-vicsek-model-how-do-birds-flock-and-insects-swarm">Simulating the Vicsek Model (with time delay) - How do birds flock and insects swarm</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/further-introduction-to-how-do-birds-flock-and-insects-swarm">How do birds flock and insects swarm: the Problem with current models</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/introduction-to-how-do-birds-flock-and-insects-swarm">How do birds flock and insects swarm: the Introduction</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/v-tyrsene-na-zif-vyv-wikipedia">В търсене на Зиф във Википедия</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="You&#x27;re trapped in a basement. You have a computer, but it doesn&#x27;t have an operating system. You have a floppy disk with a boot sector. What&#x27;s on that floppy disk, so it can help you get out of this predicament? Let&#x27;s McGyver ourselves out of this situation!"><link itemprop="image" href="https://kblagoev.com/content/images/2025/02/hi-wilson.jpg"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/bootstrapping-a-pc-from-bios-the-monitor">The Monitor - Bootstrapping a PC from BIOS</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-02-21T00:00:00.000Z" itemprop="datePublished">February 21, 2025</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-long-preamble">A long preamble<a href="#a-long-preamble" class="hash-link" aria-label="Direct link to A long preamble" title="Direct link to A long preamble">​</a></h2>
<p>As a programmer, it&#x27;s often shocking to me the rift that exists between writing software, and knowing how a computer works. Web developers probably have it the toughest. You can write your React TODO app, and in no time have it effortlessly do dynamic checkboxing galore at the low low cost of thousands of megabytes of memory. And you never have to think about the stupid amount of abstractions that happen under the hood to make this work. The transpiling of Typescript to JavaScript. The JavaScript interpreter building bytecode on the fly. The network protocols defining forms and shapes of data, so that it can be sent, received and parsed by independent participants. The services that the host operating system runs to facilitate all those middle steps. The weaving and bobbing of data between your user space &quot;server&quot; and the OS kernel. The processor threads spawning in and out of existence at the speed of light. It&#x27;s just insane how much happens under the hood. And all written by humans, by the way.</p>
<p>I have slowly begun to accept that I will never know all of these inner workings and how they function. But my everlasting internal strive for freedom shouts and begs. It wants me to know more, so I can do more. In my vain attempt at achieving ever broader knowledge, I recognise the opportunity to learn to do better at things I am but adequate at. Or, at least such are the delusions of a man, who just wants, nay - needs to always know more.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-gedankenexperiment">The Gedankenexperiment<a href="#the-gedankenexperiment" class="hash-link" aria-label="Direct link to The Gedankenexperiment" title="Direct link to The Gedankenexperiment">​</a></h3>
<p>In that vein, I propose a thought experiment. Imagine that, due to circumstances out of the scope of this experiment, you find yourself locked in a basement. You have no wants for food or drink, but you need to communicate with the outside world. You have a PC in the basement. And it has a network cable plugged into it. You try turning the PC on, but all you see is the standard IBM PC BIOS start, and that classic POST check happen, with the ubiquitous high-pitched electronic <em>bing</em> to notify you that all is indeed good. But all is not good. The machine has no operating system, so you can&#x27;t even check your Twitter, to make yourself feel good for being locked in a basement. All of that <em>raw</em> computing power right there in front of you, and you can&#x27;t do <em>anything</em> with it!</p>
<figure><img src="/content/images/2025/02/no-bootable-device.jpg"><figcaption>An example image to make your heart drop a beat.</figcaption></figure>
<p>You look around, and you find also a classic 3.5 inch floppy disk sitting on the desk (no, it&#x27;s not a 3D-printed save icon), waiting patiently to be inserted into the floppy drive of the (apparently ancient) PC. You recognise the disk. You know it&#x27;s just short of being empty, apart from something small on the boot sector of it.</p>
<p>A plan is now condensing onto the dimpled glossy surface of your brain like morning dew on motherboards laying in an electronics garbage dump. You need to write an operating system, some network drivers, a client for one of the hundreds of network protocols, and send a message out!</p>
<p>The question posed for the thought experiment is: what is on the floppy disk&#x27;s boot sector, such that it would allow you to bootstrap the process?</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>At the end of this preamble, I want to point out that I&#x27;m no OS developer, and this is not a series of articles to teach you how to structure and create the next Linux kernel. This is just me playing around, breaking a lot of things, and learning along the way. Take the information here with a grain of salt, and mainly for entertainment purposes. What I&#x27;m doing here may seem obvious to you, or just plain boring - or it may be as weirdly magical and thought-provoking as it is for me. In either case, you might find something you enjoy. But you&#x27;ve been forewarned - an OS development course this ain&#x27;t.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-bootloader">The bootloader<a href="#the-bootloader" class="hash-link" aria-label="Direct link to The bootloader" title="Direct link to The bootloader">​</a></h2>
<p>Modern IBM compatible PCs differ from hunks of expensively produced rocks of precious materials in one big way - they tend to have a Basic Input Output System (BIOS) installed on a ROM somewhere on their motherboards. This little program has two main jobs - running a diagnostic Power-On Self-Test (POST), and then giving the control to a user-provided program, which can further utilise the BIOS interrupts if it so desires.</p>
<p>As it can be seen on the screenshot above, the BIOS will look for bootable devices amongst different media such as CD-Roms, hard-drives and floppy drives. What it&#x27;s looking for in particular is a so-called bootloader program, located on the medium&#x27;s boot sector. What&#x27;s a boot sector? Just a piece of memory, which is exactly 512 bytes long, and ends on the magic number <code>0xAA55</code>. The BIOS will just take these 512 bytes of memory, plop them on memory address <code>0x7C00</code>, and execute them. From there on, it takes no responsibility for what happens, apart from providing some basic input/output capabilities in the form of so-called <em>BIOS interrupts</em>.</p>
<p>So, our first goal is now becoming clearer. We need to write a program which is up to 512 bytes large, pad the remaining memory with zeroes, and end it with the magic number. Inside of this program, we can make use of BIOS interrupts.</p>
<p>The last thing we need to take into account is how we address memory. This is a huge topic with regards to how it&#x27;s done in any operating system/hardware combo. For the purposes of this initial step, we can skip the explanations, and just state as a fact, that we will address memory using the so-called &quot;16-bit real mode&quot;. So, we can just address <em>anything</em> we want from address <code>0x0000</code> to <code>0xFFFF</code>. And I mean it when I say anything. We can just read and overwrite anything in that range, potentially just breaking stuff along the way.</p>
<p>Well, we&#x27;ve pretty much established the first set of constraints of what needs to happen for our thought experiment. On the floppy disk our past selves have thoughtfully provided for us to use, we need to have a program, which:</p>
<ul>
<li>Is no larger than 512 bytes.</li>
<li>Needs to know it will be put on memory address <code>0x7C00</code>.</li>
<li>Has to end on the magic number <code>0xAA55</code>.</li>
<li>Can address memory using 16-bit numbers.</li>
<li>Can use <a href="https://grandidierite.github.io/bios-interrupts/" target="_blank" rel="noopener noreferrer">BIOS interrupts</a> to communicate with hardware.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wilson">Wilson<a href="#wilson" class="hash-link" aria-label="Direct link to Wilson" title="Direct link to Wilson">​</a></h3>
<p>So, let&#x27;s turn our silicon-rock-of-a-computer into a virtual Wilson. I&#x27;m providing the assembly snippet that can make that happen, with comments. I hope those comments make sense, since I will attempt to not explain the code in text too much.</p>
<div class="language-asm codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[BITS 16]        ; Use 16-bit mode (x86 real mode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ORG 0x7C00]     ; Origin - BIOS loads boot sector at memory address 0x7C00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; Print &#x27;H&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov ah, 0x0E   ; BIOS teletype output function (INT 10h, AH=0Eh)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov al, &#x27;H&#x27;    ; Character to print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int 0x10       ; Call BIOS interrupt to display the character</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; Print &#x27;i&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov ah, 0x0E   ; BIOS teletype output function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov al, &#x27;i&#x27;    ; Character to print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int 0x10       ; Call BIOS interrupt to display the character</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; Infinite loop to prevent the bootloader from proceeding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hang:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jmp hang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Boot sector signature (must be 0xAA55 for BIOS to recognize it as bootable)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">times 510-($-$$) db 0   ; Fill the rest of the boot sector with zeroes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dw 0xAA55               ; Boot sector magic number</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>I suspect that the only thing which is harder to grasp is the interrupts themselves. They are just another set of magic numbers that point to routines loaded into memory by BIOS itself. There exists a <a href="https://www.ctyme.com/rbrown.htm" target="_blank" rel="noopener noreferrer">comprehensive list</a> of BIOS interrupts out there, for those curious about them.</p>
<p>As to how I compile this, put it on a floppy and run it in an emulator: you can check my repository on the matter, called <a href="https://github.com/tihawk/zilch" target="_blank" rel="noopener noreferrer">zilch</a>. Now, let&#x27;s see how Wilson is doing.</p>
<figure><img src="/content/images/2025/02/hi-wilson.jpg"><figcaption>Hi, Wilson.</figcaption></figure>
<p>Excellent! The beginnings of a long-lasting friendship, I&#x27;d imagine.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-monitor">The monitor<a href="#the-monitor" class="hash-link" aria-label="Direct link to The monitor" title="Direct link to The monitor">​</a></h2>
<p>Now, Wilson is cool and all, but we have to push forward in order to achieve the true objective of our thought experiment. We need to have a program, which would bootstrap our OS-development efforts. If our past selves left a floppy disk with a program that just prints <strong>Hi</strong> on the screen, I don&#x27;t think we&#x27;d get too far. Or be pleased with ourselves.</p>
<p>What we need is a program, which can receive input from the keyboard, and at some point execute whatever we input. This is called a <strong>monitor</strong>. Let&#x27;s start real-simple-like, and define our monitor as such:</p>
<ol>
<li>The <strong>monitor</strong> can read keyboard strokes.</li>
<li>The input will be called the <strong>program</strong>.</li>
<li>The user can input the program using octal code (numbers in base 8 (digits from 0 to 7)).</li>
<li>The monitor will translate this input into hex (numbers in base 16), so that it can be understood as memory addresses, opcodes, and BIOS interrupts.</li>
<li>The user won&#x27;t see what they&#x27;re typing.</li>
<li>The user won&#x27;t be able to edit what they type. If they make a mistake, they need to restart the computer and start from scratch.</li>
<li>The program will be stored on the boot sector, in the empty space between the end of the monitor, and the magic number <code>0xAA55</code>.</li>
<li>If the user types anything different from a digit from 0 to 7, the monitor will execute the program that has been input so far.</li>
</ol>
<p>Point 7 limits the size of our program to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>512</mn><mo>−</mo><mtext>&lt;size of bootloader&gt;</mtext><mo stretchy="false">)</mo><mtext> bytes</mtext></mrow><annotation encoding="application/x-tex">(512 - \text{&lt;size of bootloader&gt;})\text{ bytes}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">512</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord">&lt;size of bootloader&gt;</span></span><span class="mclose">)</span><span class="mord text"><span class="mord"> bytes</span></span></span></span></span>. It can be very easily avoided, but let&#x27;s just keep it for now, as a minimalism thing.</p>
<p>Well, in all honesty, I just described exactly the operation of our little monitor, so let&#x27;s just see it written in assembly.</p>
<div class="language-asm codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[BITS 16]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ORG 0x7C00] ; BIOS loads the boot sector here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Main loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov si, program ; Initialize pointer to the program array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">input_loop:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov cx, 3 ; Read 3 digits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">digit_input:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; Read a character from the keyboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    call getch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sub al, &#x27;0&#x27; ; Convert ASCII to numerical value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cmp al, 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ja execute_program ; If input is greater than &#x27;7&#x27;, jump to execute the program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; Multiply the current byte by 8 and add the new digit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov bl, byte [si]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shl bl, 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add bl, al</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov byte [si], bl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loop digit_input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; Move to the next byte in the program array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inc si</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jmp input_loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Execute the program stored in memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">execute_program:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    call program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; Infinite loop (halt the CPU)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jmp $</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Function to read a character from the keyboard using BIOS interrupt 0x16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">getch:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov ah, 0x00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int 0x16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Reserve the remaining space on the boot sector for the program we input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">program: times 510-($-$$) db 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Boot sector magic number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dw 0xAA55</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Again, the only special thing in the code itself is that we use BIOS interrupt <code>0x16</code> to read keyboard input. The monitor reads the input, waits for three consecutive digits from 0 to 7 to be input, translates them into hex and stores them in memory. If it detects anything different from these 8 digits, it just jumps to the program we&#x27;ve input so far, and executes it.</p>
<p>Why 3-digit numbers? Well, with 3 digits in octal we can represent 2 digits in hex (<code>0o377 = 0xFF</code>), which are 8 bits in binary (<code>0xFF = 0b11111111</code>). And so, once we have 3 digits in octal, that means we have a 1 byte number (as long as the octal number is <code>&lt;= 0o377</code>), which we can go ahead and store into memory as the next byte. Let&#x27;s look at an example. If we input the number <code>020</code> into the monitor, this will be translated to the hex byte <code>0x10</code>. Do you know what that byte means? We&#x27;ve seen it before - it&#x27;s the BIOS interrupt for printing onto the screen!</p>
<p>So, not only can we put random numbers into our monitor, that may or may not mean anything, we can input opcodes, BIOS interrupts and variables into it, constructing machine code that the computer can just run. We&#x27;ve gone to the lowest of low levels! We aren&#x27;t even writing assembly anymore, we are literally speaking CPU-ese now.</p>
<p>Now, I&#x27;ve gone through the trouble of translating our Wilson program into octal machine code for us to use. It&#x27;s just short enough, so we can test our monitor with it:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">264 016 260 110 315 020 264 016 260 151 315 020 364</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>All we have to do now is put our monitor on a floppy, start our PC with it inserted, wait for the BIOS to load the monitor (and display nothing), <em>blindly</em> input the machine code from above (without spaces!), hit a key which is larger than 7, and see if we can revive Wilson!</p>
<figure><img src="/content/images/2025/02/hi-wilson-again.png"><figcaption>Hi, Wilson...again</figcaption></figure>
<p>I mean, at this point you really have to trust me that I did this...or go and do it yourself, using the code in <a href="https://github.com/tihawk/zilch" target="_blank" rel="noopener noreferrer">the repo</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="so-far---so-good">So far - so good<a href="#so-far---so-good" class="hash-link" aria-label="Direct link to So far - so good" title="Direct link to So far - so good">​</a></h2>
<p>In an extremely minimalistic way, we&#x27;ve technically achieved the requirements of the thought experiment. We have now a <strong>monitor</strong> program, which boots from the boot sector of a floppy disk, and in which we can input machine code to be executed directly from memory.</p>
<p>The next step would be to write a better monitor program, which has more text-editing capabilities. Then, maybe write a small assembler, so that we can write assembly instead of machine code, and assemble and run it. At that point, we will probably want to also escape real-mode, and go into 32-bit protected mode. Then we can even start writing and compiling C! And then we&#x27;re really off to the races.</p>
<p>But let&#x27;s just take a minute to appreciate what we&#x27;ve achieved. We do technically have the first step towards bootstrapping an entire computer from BIOS! If we are patient and damn-stubborn enough, we can build an OS from this by never leaving Wilson&#x27;s keyboard again!</p>
<p>I will do all of these steps, and more, but for the time being I will leave this as is, so it doesn&#x27;t become too cumbersome to read. I&#x27;m going to continue posting on the subject, so keep an eye out! Meanwhile, I hope you&#x27;ve enjoyed the ride so far, and are looking forward to more Bootstrapping from BIOS shenanigans! Have fun!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/os-development">OS-Development</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/bios-to-os">BIOS-to-OS</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/low-level">Low-Level</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Shebangs, or interpreter directives have been around since the &#x27;80s. They help select interpreters for the little scripts we write. But I realised I&#x27;ve never really looked into why am I writing this magic line of nonsense in the beginning of scripts. And of course, what are its limitations and/or weird associated behaviours we can make use of?"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/on-shebangs-being-funky">On shebangs, and their funky behaviour</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-02-20T00:00:00.000Z" itemprop="datePublished">February 20, 2025</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="shebang-or-the-interpreter-directive">Shebang, or the interpreter directive<a href="#shebang-or-the-interpreter-directive" class="hash-link" aria-label="Direct link to Shebang, or the interpreter directive" title="Direct link to Shebang, or the interpreter directive">​</a></h2>
<p>Have you ever wondered what&#x27;s that magical first line that you put on top of your scripts, and starts with the characters <code>#!</code> ?</p>
<p>You might&#x27;ve seen it, for example, in the form of <code>#!/usr/bin/env bash</code> on the first line of every bash script you&#x27;ve ever written or seen.</p>
<p>But why is it there, and what does it do?</p>
<p>This so-called <em>shebang</em> line is a Unix feature which was introduced <a href="https://homepages.cwi.nl/~aeb/std/shebang/origin.html" target="_blank" rel="noopener noreferrer">back in 1980</a> to allow for scripts to be run as executables by specifying the interpreter that the script needs to run itself. This simply means that with the shebang you&#x27;re abstracting away the call to the interpreter, and instead of calling <code>bash script.sh</code> you can now just say <code>./script.sh</code>. That&#x27;s mostly all there is to it. And yes, it&#x27;s technically called an <em>interpreter directive</em>.</p>
<p>What happens in the background, is that the program loader finds the interpreter you&#x27;ve specified in your <code>PATH</code> variable, runs it, and passes the location of your script to the interpreter as an argument. You can see that much in your process viewer as well.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat &gt; shebang.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#! /usr/bin/env bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;SHEBANG!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">^C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ chmod +x shebang.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./shebang.sh &amp; ps -aux | grep shebang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2] 276038</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHEBANG!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kblagoev  276038  0.0  0.0  13156  3584 pts/5    T    13:55   0:00 bash ./shebang.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2]+  Stopped                 ./shebang.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ fg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./shebang.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">^C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="interpreters-you-say">Interpreters, you say<a href="#interpreters-you-say" class="hash-link" aria-label="Direct link to Interpreters, you say" title="Direct link to Interpreters, you say">​</a></h2>
<p>If you&#x27;ve also written Python scripts, you surely have seen that you can pass a shebang to the python script as well. Since Python is an interpreted language, it actually works in precisely the same way w.r.t. the shebang line. You can simply write <code>#!/usr/bin/env python3</code> at the top of your script, make it executable, and suddenly the program loader knows to run the python interpreter and pass your script location as an argument.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">test.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#!/usr/bin/env python3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Hello from the Python interpreter&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ chmod +x test.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./test.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello from the Python interpreter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="well-javascript-is-interpreted-too">Well, JavaScript is interpreted too<a href="#well-javascript-is-interpreted-too" class="hash-link" aria-label="Direct link to Well, JavaScript is interpreted too" title="Direct link to Well, JavaScript is interpreted too">​</a></h3>
<p>Oh, how right you are! For some reason it never occured to me before, but since JavaScript is also a non-compiled, interpreted language, we should be able to make any scripts written in JS into executable files by providing a shebang line to it with some JS runtime like <em>node</em> or <em>bun</em>, right?</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">test.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token hashbang comment" style="color:#999988;font-style:italic">#!/usr/bin/env node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Hello from Node, it being a javascript interpreter and all&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ chmod +x test.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./test.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello from Node, it being a javascript interpreter and all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Yep. That&#x27;s really cool, if you ask me! Now, technically there is a limitation here. As you&#x27;ve noticed, the shebang line starts with a <em>hash</em> symbol, and there&#x27;s a good reason for that. The <code>#</code> symbol is used as a comment in many scripting languages, like shell and python, and it has been chosen for exactly that reason - to not break the syntax that the interpreter for shell expects. But in JavaScript <code>#</code> is not a comment. So, technically this would break JS syntax. And as such, it&#x27;s up to each JS interpreter to implement the ignoring of shebang lines - basically a first line of a script file which starts with <code>#</code> or <code>#!</code> I guess. As such, with languages that don&#x27;t support <em>hash</em> comments your milage may vary depending on the interpreter implementation. But hey, it works on node!</p>
<p>I leave it as an exercise for the reader to see if your favourite scripting language works with shebang lines :) Odds are, it does - as long as either the language already has <code>#</code> as a comment, or your interpreter has implemented ignoring shebang lines.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-in-a-shebang-line">Arguments in a shebang line<a href="#arguments-in-a-shebang-line" class="hash-link" aria-label="Direct link to Arguments in a shebang line" title="Direct link to Arguments in a shebang line">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="interpreter-directive-arguments">Interpreter directive arguments<a href="#interpreter-directive-arguments" class="hash-link" aria-label="Direct link to Interpreter directive arguments" title="Direct link to Interpreter directive arguments">​</a></h3>
<p>So, technically the the shebang syntax is defined as <code>#! interpreter [optional-one-arg-only]</code>. This means that the <code>interpreter</code> is actually the first value provided after the magic number <code>#!</code>. So, we could write simply <code>#! /bin/bash</code> and hope that the <em>bash</em> is located at <code>/bin/bash</code>.</p>
<p>But, as we&#x27;ve seen, we actually usually write more so something like <code>#! /usr/bin/env bash</code>, meaning that the &quot;interpreter&quot; is actually <code>/usr/bin/env</code>, and we have an additional optional param called <code>bash</code>. This isn&#x27;t really what&#x27;s happening though. What we&#x27;re saying here, is that we are going to look for <code>bash</code> inside the <code>PATH</code> variable. This helps with the portability of scripts between different OSs, as we can&#x27;t guarantee that the interpreter will be in the same location on each OS.</p>
<p>But, by doing this, we&#x27;ve also used up all of our 1 available optional arguments we can pass into the shebang line. So, if we need to pass an argument to an interpreter, we are out of luck.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">arguments_not_working.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token hashbang comment" style="color:#999988;font-style:italic">#!/usr/bin/env node -e console.log(\&quot;Running this through the shebang line\&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If we try running this, we would always get an error that saying &quot;No such file or directory&quot;</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ chmod +x arguments_not_working.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./arguments_not_working.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/env: &#x27;node -e console.log(\\&quot;Running this through the shebang line\\&quot;)&#x27;: No such file or directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/env: use -[v]S to pass options in shebang lines</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="passing-multiple-arguments-to-the-shebang-line">Passing multiple arguments to the shebang line<a href="#passing-multiple-arguments-to-the-shebang-line" class="hash-link" aria-label="Direct link to Passing multiple arguments to the shebang line" title="Direct link to Passing multiple arguments to the shebang line">​</a></h3>
<p>But hey, what&#x27;s that thing on the bottom saying? Well, we can actually <a href="https://www.gnu.org/software/coreutils/manual/html_node/env-invocation.html#g_t_002dS_002f_002d_002dsplit_002dstring-usage-in-scripts" target="_blank" rel="noopener noreferrer">pass multiple arguments</a> to the shebang line, using the <code>-S</code> flag! It&#x27;s not guaranteed to work on every system, so it may reduce portability. But it&#x27;s still a thing we can try.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">arguments_working.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token hashbang comment" style="color:#999988;font-style:italic">#!/usr/bin/env -S node -e console.log(\&quot;&quot;Running\_this\_through\_the\_shebang\_line\&quot;&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ chmod +x arguments_working.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./arguments_working.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running this through the shebang line</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you notice that the <a href="https://www.gnu.org/software/coreutils/manual/html_node/env-invocation.html#Escape-sequences" target="_blank" rel="noopener noreferrer">-S escape sequences</a> can be somewhat nightmarish, but in more common scenarios you shouldn&#x27;t need them that much.</p>
<p>You can also optionally replace the <code>-S</code> argument with <code>-vS</code> if you need to debug the arguments you&#x27;re passing down to the interpreter.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./arguments_working.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">split -S:  &#x27;node -e console.log(\\&quot;&quot;Running\\_this\\_through\\_the\\_shebang\\_line\\&quot;&quot;)&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> into:    &#x27;node&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &amp;    &#x27;-e&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &amp;    &#x27;console.log(&quot;Running this through the shebang line&quot;)&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">executing: node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   arg[0]= &#x27;node&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   arg[1]= &#x27;-e&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   arg[2]= &#x27;console.log(&quot;Running this through the shebang line&quot;)&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   arg[3]= &#x27;./arguments_working.js&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running this through the shebang line</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nesting-shebang-calls">Nesting shebang calls<a href="#nesting-shebang-calls" class="hash-link" aria-label="Direct link to Nesting shebang calls" title="Direct link to Nesting shebang calls">​</a></h2>
<p>Now, we&#x27;ve been saying that the shebang line is used to specify an interpreter to run the script file. But what&#x27;s an interpreter? On the highest of levels, it&#x27;s some <em>binary</em> that can execute scripts in a given language. But for the purposes of the program loader, a binary is just an executable file. And at the start of the article said that we can make script files executable by providing them with a shebang line.</p>
<p>So, what&#x27;s stopping us from calling <em>any</em> executable file from a shebang line, including files that are only executable because they have their own shebang line? Well, let me answer this clearly rhetorically stated by me question with the laconic &quot;nothing&quot;. So, let&#x27;s test this with a contrived example.</p>
<p>First, we create a JavaScript script with a shebang line.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token hashbang comment" style="color:#999988;font-style:italic">#! /usr/bin/env node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Hi from JS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, let us create a random-ass file with just a shebang line to call our JS script. Do notice the file locations specified.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">sheshotmedown.bangbang</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#! /usr/bin/env -S ${HOME}/code/scripts/js.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Aaaand, let&#x27;s see what we&#x27;ve done.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ chmod +x sheshotmedown.bangbang js.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./sheshotmedown.bangbang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hi from JS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Honestly, upon this realisation I just went &quot;Daaaang!&quot;. You can basically set up a weird-ass dependency chain this way. Not that you&#x27;d want to, probably, but this is still hilariously amusing to me. Let&#x27;s see if it works with one more layer, but with a local directory call.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">ihittheground.bangbang</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#! ./sheshotmedown.bangbang</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ chmod +x ihittheground.bangbang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./ihittheground.bangbang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hi from JS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Yep, we got it down. We can just call random executable files from within the shebang line.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="and-now-with-arguments">And now with arguments<a href="#and-now-with-arguments" class="hash-link" aria-label="Direct link to And now with arguments" title="Direct link to And now with arguments">​</a></h3>
<p>The last thing I wanted to showcase, is the fact that you keep passing the shebang arguments down the chain of calls. Let&#x27;s do one final experiment</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">bangbang.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token hashbang comment" style="color:#999988;font-style:italic">#! /usr/bin/env -S BANG=&quot;He\_wore\_black\_and\_I\_wore\_white&quot; node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">argv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">BANG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;He would always win the fight&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">mybabyshotmedown.bangbang</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#! /usr/bin/env -S ./thatawfulsound.bangbang &quot;We\_rode\_on\_horses\_made\_of\_sticks&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">thatawfulsound.bangbang</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#! /usr/bin/env -S ./bangbang.js &quot;I\_was\_five,\_and\_he\_was\_six&quot; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ chmod +x mybabyshotmedown.bangbang thatawfulsound.bangbang bangbang.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./mybabyshotmedown.bangbang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;/home/kblagoev/.nvm/versions/node/v18.14.0/bin/node&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;/home/kblagoev/code/scripts/bangbang.js&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;I was five, and he was six&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;./thatawfulsound.bangbang&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;We rode on horses made of sticks&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;./mybabyshotmedown.bangbang&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;He wore black and I wore white&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;He would always win the fight&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see, we kept the arguments we passed through the shebang lines down until the last call of the Node script. And additionally, we get the &quot;interpreters&quot; called from the shebang line as arguments as well. Pretty neat.</p>
<p>Anyway, I hope you&#x27;ve had fun with this, and maybe you can actually apply it somewhere - who knows. Have fun!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/coding">Coding</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/scripting">Scripting</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/programming">Programming</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">Linux</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="The Winamp GitHub repository is seriously mismanaged. And there&#x27;s nothing they can do about it now."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/winamp-github-repository-problems">The Winamp GitHub repository is seriously mismanaged. And there&#x27;s nothing they can do about it now.</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-10-08T00:00:00.000Z" itemprop="datePublished">October 8, 2024</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preamble">Preamble<a href="#preamble" class="hash-link" aria-label="Direct link to Preamble" title="Direct link to Preamble">​</a></h2>
<p>At this point, I think it&#x27;s no secret that Winamp going &quot;open-source&quot; has been a bit of a <a href="https://www.youtube.com/watch?v=NgZPa78InWw&amp;pp=ygUSd2luYW1wIG9wZW4gc291cmNl" target="_blank" rel="noopener noreferrer">shit-show</a>.</p>
<p>The initial outrage on the repository was in response to the apparent lack of understanding of what open-source means on the side of Winamp, as they claim that their license is &quot;<a href="https://www.gnu.org/licenses/copyleft.en.html" target="_blank" rel="noopener noreferrer">copyleft</a>&quot;, while allowing for neither redistribution of modified versions, nor contributions to the official project, and initially not even <a href="https://github.com/WinampDesktop/winamp/commit/64a51755c6f5d85039463c8bf7c2a9e98e862586" target="_blank" rel="noopener noreferrer">allowing forking</a>! Someone did <a href="https://github.com/WinampDesktop/winamp/issues/6" target="_blank" rel="noopener noreferrer">point it out</a> to them that they can&#x27;t ban forking on GitHub, as that constitutes <a href="https://docs.github.com/en/site-policy/github-terms/github-terms-of-service#5-license-grant-to-other-users" target="_blank" rel="noopener noreferrer">a violation of the TOS</a>. So, Winamp updated their license to allow forking, but it still doesn&#x27;t allow anything else that would constitute &quot;open-source&quot; - redistribution or even outside contributions.</p>
<figure class="kg-card kg-image-card kg-card-hascaption"><img src="/content/images/2024/10/winamp-allowed-forking.jpg" class="kg-image" loading="lazy"><figcaption>A truly historic moment, ladies and gentlemen :)</figcaption></figure>
<p>In objective terms, this license falls in the category of &quot;source-available&quot; rather than open-source, and this <em>is</em> an important distinction to make. I have no problem with Winamp making their source available as a valuable case-study, but they really shouldn&#x27;t have used the term &quot;copyleft&quot; if that is the intention.</p>
<p>But we&#x27;re here to discuss more so another glaring issue with the repository, which might actually end up landing a lawsuit at Winamp&#x27;s doors. And sadly, they can&#x27;t really do anything about it anymore.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-rough-overview-of-github">A rough overview of GitHub<a href="#a-rough-overview-of-github" class="hash-link" aria-label="Direct link to A rough overview of GitHub" title="Direct link to A rough overview of GitHub">​</a></h2>
<p>In its simplest form, GitHub can be described as a web-hosted git server for the public. As a developer interested in open-source, you can create a git repository, write some incredible code that you AND your mum are really proud of, and share it with the world on GitHub, so everyone can appreciate your contribution to the democratisation of programming.</p>
<p>But GitHub is more than simply a place to host your git repository. It is also a collaboration platform, where anyone who feels like they <em>like</em> your code, and would like to change it until they <strong>love</strong> it, can &quot;fork&quot; your repository. Forking is in fact not a more aggressive version of spooning, but simply the act of making a clone of the original repository in your account. This forked repository contains all the history of the original - all the code, and all the commits that came before the fork.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="back-to-the-beauty-that-is-the-winamp-github-repo">Back to the beauty that is the Winamp GitHub repo<a href="#back-to-the-beauty-that-is-the-winamp-github-repo" class="hash-link" aria-label="Direct link to Back to the beauty that is the Winamp GitHub repo" title="Direct link to Back to the beauty that is the Winamp GitHub repo">​</a></h2>
<p>If you were to peruse the code on the Winamp repository in the <a href="https://github.com/WinampDesktop/winamp/tree/20d28e80a5c861a9d5f449ea911ab75b4f37ad0d" target="_blank" rel="noopener noreferrer">first few days</a> after its publishing, you would have noticed some very intriguing things. For example, a <code>BuildTools</code> directory which included things like whole executable files the <code>7zip</code>, <code>git</code>, and other programs just hanging around, designated as &quot;build tools&quot;. And although very odd indeed, these things seem more so <em>stupid</em> than harmful.</p>
<p>But there&#x27;s much more there! Inside the repo there was proprietary code from Dolby, some questionable SDKs which Winamp may or may-not have the right to redistribute, an entire directory containing the commercial version of Qt, some, admittedly expired, credentials, and so on, and so forth.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="winamp-did-take-some-action">Winamp did take some action<a href="#winamp-did-take-some-action" class="hash-link" aria-label="Direct link to Winamp did take some action" title="Direct link to Winamp did take some action">​</a></h3>
<p>There are numerous pull requests <a href="https://github.com/WinampDesktop/winamp/pull/1378" target="_blank" rel="noopener noreferrer">deleting said files</a>, and the maintainers <a href="https://github.com/WinampDesktop/winamp/commit/16911d12a01f82fea5d851f98e9e702d80f881d5" target="_blank" rel="noopener noreferrer">did</a> <a href="https://github.com/WinampDesktop/winamp/commit/e721b2e039742c12c1f9c93b1b779ca3b7fc061e" target="_blank" rel="noopener noreferrer">also</a> <a href="https://github.com/WinampDesktop/winamp/commit/6ff62b6dda0906648b0a5ce891e85231cbbb40d5" target="_blank" rel="noopener noreferrer">remove</a> a lot, if not all the unlicensed code. And they did this... in public. You can clearly see many of the commits that delete stuff right there on the <a href="https://github.com/WinampDesktop/winamp/commits" target="_blank" rel="noopener noreferrer">commits page</a>. Which, you know, is a problem. If you open any of the commits listed there, you can simply look at the code that was deleted. If you simply clone that repository locally, you can move around that history and see it at the times before it was removed. This public deletion without rebasing just does nothing.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="they-deleted-some-of-the-commits">They deleted some of the commits<a href="#they-deleted-some-of-the-commits" class="hash-link" aria-label="Direct link to They deleted some of the commits" title="Direct link to They deleted some of the commits">​</a></h3>
<p>OK well, if you just scroll around the commits history, you will notice that the commits that delete, for example the Dolby code is nowhere to be found. But in the end, that doesn&#x27;t really do anything either, since you can still just go back in history to <a href="https://github.com/WinampDesktop/winamp/commit/20d28e80a5c861a9d5f449ea911ab75b4f37ad0d" target="_blank" rel="noopener noreferrer">a commit before they deleted it</a>, and just see it there.</p>
<figure class="kg-card kg-image-card kg-card-hascaption"><img src="/content/images/2024/10/look-mum-im-a-criminal-now.jpg" class="kg-image" loading="lazy"><figcaption>Does this count as distribution?</figcaption></figure>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ok-what-can-they-do">Ok, what can they do?<a href="#ok-what-can-they-do" class="hash-link" aria-label="Direct link to Ok, what can they do?" title="Direct link to Ok, what can they do?">​</a></h3>
<p>I mean, they could just rebase everything, this would theoretically get rid of the commit history. They&#x27;d need to get rid of pull requests as well, since those contain code from certain history positions. And to be honest, at this point I&#x27;d just delete the repo from GitHub, clean up the codebase locally, and create the GitHub repo anew.</p>
<p>But really, even that would not be enough anymore.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-lesser-known-feature-of-github">A lesser-known &quot;feature&quot; of GitHub<a href="#a-lesser-known-feature-of-github" class="hash-link" aria-label="Direct link to A lesser-known &quot;feature&quot; of GitHub" title="Direct link to A lesser-known &quot;feature&quot; of GitHub">​</a></h2>
<p>Remember how I said that they deleted some of the commits from their history, so you can&#x27;t simply see what code they removed? Well, even though that commit is gone from the git history, and you wouldn&#x27;t see it even if you cloned the repository locally... you can still see it on GitHub.</p>
<p>You see, to facilitate collaboration through forking, GitHub introduces something called a &quot;<a href="https://docs.github.com/en/repositories/viewing-activity-and-data-for-your-repository/understanding-connections-between-repositories#viewing-a-repositorys-network" target="_blank" rel="noopener noreferrer">repository network</a>&quot;. This network holds information of the &quot;upstream&quot; or parent repository, all of its forks, and all the commits that belong to each fork.</p>
<p>Additionally, GitHub caches commits, so that they can be accessed by other repositories in the repository network. As explained by <a href="https://news.ycombinator.com/item?id=41060102" target="_blank" rel="noopener noreferrer">Github themselves</a>:</p>
<blockquote>
<p>GitHub stores the parent repository along with forks in a &quot;repository network&quot;. It is a known behavior that objects from one network member are readable via other network members. Blobs and commits are stored together, while refs are stored separately for each fork. This shared storage model is what allows for pull requests between members of the same network.</p>
</blockquote>
<p>So, not only are the deleted commits potentially visible inside of forks that may have this commit from before it was deleted in the upstream repository. No, they are also just visible in general, as long as you know the commit hash. GitHub simply caches them, and you can just visit the page for that commit, and see all the changes it has made, and the entire code-base at that point in history.</p>
<figure class="kg-card kg-image-card kg-card-hascaption"><img src="/content/images/2024/10/github-deleted-commit.jpg" class="kg-image" loading="lazy"><figcaption>You can still see deleted commits on GitHub</figcaption></figure>
<p>So, even if you rebase your repository, the commits history is still there, cached and awaiting. And all forks that were made before the rebase, you can just peruse those anyway.</p>
<p>Now, to be fair - GitHub has an entire <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository#about-sensitive-data-exposure" target="_blank" rel="noopener noreferrer">docs section</a> about leaking sensitive data. It does mention that you can contact support, and request the cached commits to be removed, if they deem that sensitive data has been exposed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="so-what-if-github-clears-the-cache-and-we-delete-the-repo">So, what if GitHub clears the cache, and we delete the repo?<a href="#so-what-if-github-clears-the-cache-and-we-delete-the-repo" class="hash-link" aria-label="Direct link to So, what if GitHub clears the cache, and we delete the repo?" title="Direct link to So, what if GitHub clears the cache, and we delete the repo?">​</a></h3>
<p>Well, nothing. It has been already forked more than 2600 thousand times as of the time I&#x27;m writing this. It&#x27;s out there on GitHub :) A lot of the forks were even made before anything was deleted from the repo. So you don&#x27;t even have to rely on cached commit hashes. In the same <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository#about-sensitive-data-exposure" target="_blank" rel="noopener noreferrer">docs page</a> I linked above, GitHub themselves say that yeah - if someone has forked your repo, you&#x27;re on your own, buddy.</p>
<p>If you remove the upstream repository of a repository network, GitHub simply <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/what-happens-to-forks-when-a-repository-is-deleted-or-changes-visibility#deleting-a-public-repository" target="_blank" rel="noopener noreferrer">designates another fork</a> to be the upstream one. And all of that history and cached commits are still accessible through any of the forked repositories.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>I do find it ironic, that this same collaborative feature which Winamp tried to disallow us from using - forking their repo, is also the one which in the end will not allow them to ever escape the reality that they managed to leak some confidential data on their repository.</p>
<p>But hey, what&#x27;s done is done, and it did allow me to learn more about how GitHub works with its repository networks and whatnot, so I guess it is possible to learn from someone else&#x27;s mistakes. I hope you learned something from this too, at the very least to be very careful with what you push to GitHub. And if you do make a mistake - just delete the repo before it was forked, and try again. QED</p>
<p>In terms of the Winamp repository, I am happy that they decided to share their codebase. Even though you literally can&#x27;t do anything with it apart from reading it, it&#x27;s still a nice case-study. And I do not wish for them to regret going source-available, so I hope they don&#x27;t get any legal problems.</p>
<p>But on the other hand, I do wish they&#x27;d gone fully open-source. I mean, what are they protecting right now? Winamp is a big part of history, everyone has at least heard of it, if not used it. But nowadays it&#x27;s just that - part of history. But we&#x27;ve seen that through collaboration and openness of the developers, a lot of software can live for a very long time. Winamp could become something modern and fully maintained, if it allowed for outside contribution. I do hope they take that next step at some point. After they clean up this mess of a repo...</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cyber-security">Cyber Security</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Maintaining your dotfiles can be actually really simple, once you set it up in a good way. After a few attempts, I landed on stow, and I ain&#x27;t going back!"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/using-stow-for-managing dotfiles">How I manage configuration files on my Linux machine using dotfiles and stow</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-10-06T00:00:00.000Z" itemprop="datePublished">October 6, 2024</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">​</a></h2>
<p>I&#x27;ve been trying to maintain a <em>dotfiles</em> repository for a few years now. There, I keep configurations for all kinds of different tools and applications I keep on my development machines. It&#x27;s great for maintainability and versioning, but maintaining and keeping the <em>dotfiles</em> up to date can be a tedious task. But I&#x27;ve quite accidentally found a good and easy way to do it!</p>
<p>The three major options I&#x27;ve considered are:</p>
<ul>
<li>Setting up a home directory as a <code>--bare</code> git repository.</li>
<li><a href="https://en.wikipedia.org/wiki/Symbolic_link" target="_blank" rel="noopener noreferrer">Symlinking</a> every configuration manually</li>
<li><a href="https://linux.die.net/man/8/stow" target="_blank" rel="noopener noreferrer"><em>Stow</em></a></li>
</ul>
<p>The first option of the runt, is of course - from a storytelling point, the first one to discard.</p>
<p>Setting up your entire home directory as a repository, you have to be careful with exactly what to track, and what not. Basically, you&#x27;d need a <code>.gitignore</code> file that you&#x27;d have to constantly update with everything <em>but</em> the things you want to keep track of. It&#x27;s very prone to accidentally adding something you don&#x27;t want tracked, and forgetting to include it in the <code>.gitignore</code>. Plus, a giant git repo in my home directory isn&#x27;t really to my taste.</p>
<p>Manual symlinking does solve those problems, but it can be quite complicated to automate and keep track of. <em>Stow</em> is an abstraction on top of symlinks, that allows us to automate symlink management, and turn it into <em>package management</em>. Let&#x27;s see how to set up your <em>dotfiles</em> repo, in order to make use of <em>stow</em>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h2>
<p>Before using <em>stow</em>, my config files were laid out in a very simple way. Basically, everything that was in the <code>$HOME/.config/</code> directory, was just copied into <code>$HOME/code/dotfiles/.config/</code>. Other configs that were just files or directories inside the <code>$HOME</code> directory, I just copied into the repo root <code>$HOME/code/dotfiles/</code> - for example from <code>$HOME/.bashrc</code> to <code>$HOME/code/dotfiles/.bashrc</code>.</p>
<div class="language-code codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">~/code/dotfiles</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-code codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- .bashrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- .config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |-- gtk-3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |-- i3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |-- nvim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |-- after</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |   |-- ftplugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |   |   `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |   `-- plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |       `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |-- init.lua</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |-- lua</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |   `-- kiroki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |       `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   `-- plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |       `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   `-- terminator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- i3blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`-- .local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `-- share</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        `-- fonts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            `-- [... files]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-stow-likes-it">How <em>stow</em> likes it<a href="#how-stow-likes-it" class="hash-link" aria-label="Direct link to how-stow-likes-it" title="Direct link to how-stow-likes-it">​</a></h3>
<p><em>Stow</em> works more like (or exactly like) a package manager. We have to think of each configuration we manage as a package. So, instead of having a bunch of configurations under the <code>.config</code> directory, like <code>$HOME/code/dotfiles/.config/i3</code> and <code>$HOME/code/dotfiles/.config/nvim</code>, we can split these into separate directories, in this example <code>$HOME/code/dotfiles/i3/.config/i3</code> and <code>$HOME/code/dotfiles/nvim/.config/nvim</code>.</p>
<p>We can name them however though, so it could be <code>$HOME/code/dotfiles/foo/.config/i3</code> for our i3 config.</p>
<p>And technically, if we want to be not-so-clever, we can just do something like <code>$HOME/code/dotfiles/my-dot-config-directory/.config/&lt;everything like i3 and nvim&gt;</code>. But the power of <em>stow</em> is that we can stow and unstow each config like a package. This technically means, that we can also version our configs. For example, we could have one version of i3 for Arch under <code>$HOME/code/dotfiles/i3-arch/.config/i3</code>, and one for Ubuntu under <code>$HOME/code/dotfiles/i3-ubuntu/.config/i3</code>. Because of these reasons, I recommend this package structure.</p>
<p>For another example, the <code>.bashrc</code> file is typically right in the <code>$HOME</code> directory, so we can &quot;package&quot; it simply as <code>$HOME/code/dotfiles/bash/.bashrc</code>. I know, I know - who uses bash anymore... well, I do apparently :)</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p><em>Stow</em> is technically a <em>package manager</em>. To make full use of it, we can turn <em>every</em> configuration we contain in our <em>dotfiles</em> into a package, by placing it in its own directory.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-is-now">How it is now<a href="#how-it-is-now" class="hash-link" aria-label="Direct link to How it is now" title="Direct link to How it is now">​</a></h3>
<p>After we migrate to using <em>stow</em>, our repo structure now looks like this:</p>
<div class="language-code codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">~/code/dotfiles</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-code codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   `-- .bashrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- fonts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   `-- .local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       `-- share</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           `-- fonts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|               `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- gtk-3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   `-- .config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       `-- gtk-3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- i3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   `-- .config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       `-- i3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- i3blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   `-- i3blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- nvim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   `-- .config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       `-- nvim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |-- after</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |   |-- ftplugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |   |   `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |   `-- plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |       `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |-- init.lua</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |-- lua</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |   `-- kiroki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |       `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           `-- plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|               `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- stow_config.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`-- terminator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `-- .config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        `-- terminator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            `-- [... files]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stowing">Stowing<a href="#stowing" class="hash-link" aria-label="Direct link to Stowing" title="Direct link to Stowing">​</a></h3>
<p>Well, great. So far, we&#x27;ve basically just moved some directories around. So, what now?</p>
<p>Well, now we can just run <em>stow</em> for each of these newly created packages. The way that <em>stow</em> works, is that it takes the directory inside of the &quot;package&quot; directory, and creates a symlink to it in the parent of the current working directory.</p>
<p>So, for example, if we now <em>cd</em> into <code>$HOME/code/dotfiles/</code>, we can run <code>stow i3</code>. What this will do is, it will create a symlink to <code>$HOME/code/dotfiles/i3/.config/i3</code> in <code>$HOME/code/.config/</code>. That will look something like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">lrwxrwxrwx  1 kblagoev kblagoev   30 Oct  6 23:14 i3 -&gt; ../code/dotfiles/i3/.config/i3/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;But wait!&quot;, I hear you say. &quot;Isn&#x27;t this <code>i3</code> directory, or symlink, or whatever, supposed to be in our <code>$HOME</code> directory? What is it doing in <code>$HOME/code/</code>?&quot;.</p>
<p>You&#x27;re absolutely right. Let&#x27;s fix this. <em>Stow</em> has a flag <code>-t</code>, or <code>--target</code>, with which we can specify the root of the package management. This target is by default the parent of the <em>pwd</em>, and that&#x27;s why by running <em>stow</em> inside of <code>$HOME/code/dotfiles/</code>, the symlinking occurred under <code>$HOME/code/</code> (and resulted in our symlink being <code>$HOME/code/.config/i3</code>. It can be a bit confusing to keep track of this, but yeah). So, instead, we want to target the <code>$HOME</code> directory. That&#x27;s why we should run <code>stow -t $HOME i3</code> instead.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If we don&#x27;t place our <em>dotfiles</em> repository in the <code>$HOME</code> directory, we have to target it when we use <em>stow</em> by utilising the <code>-t</code> flag, e.g. <code>stow -t $HOME i3</code>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unstowing">Unstowing<a href="#unstowing" class="hash-link" aria-label="Direct link to Unstowing" title="Direct link to Unstowing">​</a></h3>
<p>Removing a config is super simple with <em>stow</em> as well. Following our example with i3, we can simply run <code>stow -D -t $HOME i3</code>. The <code>-D</code> flag deletes the symlink, and our config is gone from the <code>$HOME/.config/</code> directory. And only that config!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-note-on-usage">Additional note on Usage<a href="#additional-note-on-usage" class="hash-link" aria-label="Direct link to Additional note on Usage" title="Direct link to Additional note on Usage">​</a></h2>
<p>There is a flag <code>--dotfiles</code>, which allows to rename hidden directories, such as <code>.whatever-the-name-is</code> to <code>dot-whatever-the-name-is</code>, and for them to be pre-processed by <em>stow</em> by replacing <code>dot-</code> with <code>.</code>. This is useful, so there aren&#x27;t hidden files and directories in the repo. Quite useful for easier searching that respects hidden files.</p>
<p>This is great and all, but in the latest version of <em>stow</em> on Ubuntu there&#x27;s a bug with that. The bug is fixed in the newest release of <em>stow</em>, but I will wait for it to get updated in <em>apt</em>, before migrating to that setting - just for availability reasons.</p>
<p>But if you&#x27;re going to install the latest version of <em>stow</em>, do keep that option in your mind. It&#x27;s pretty neat.</p>
<p>And lastly, for my own convenience, I&#x27;ve written a bash script which can stow and unstow all the packages inside my repo with one command. I&#x27;ve opted into having a manually updated list of the packages, just because I keep some other junk in the <em>dotfiles</em> repo, but this can be changed. I will paste the script here, if you&#x27;d like to use it yourself (or a modified version of it).</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">stow_config.sh</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Define an array of package names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">packages=(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;bash&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;gtk-3.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;i3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;i3blocks&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;terminator&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;nvim&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;fonts&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if the first argument is &quot;remove&quot; to use the -D flag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stow_flag=&quot;-t&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ &quot;$1&quot; == &quot;remove&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  stow_flag=&quot;-D -t&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Loop through each package and run stow or unstow with -D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for package in &quot;${packages[@]}&quot;; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ &quot;$1&quot; == &quot;remove&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Unstowing $package...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Stowing $package...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  stow $stow_flag &quot;$HOME&quot; &quot;$package&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ $? -eq 0 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [ &quot;$1&quot; == &quot;remove&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo &quot;$package unstowed successfully.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo &quot;$package stowed successfully.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [ &quot;$1&quot; == &quot;remove&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo &quot;Error unstowing $package.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo &quot;Error stowing $package.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;All done!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Running <code>./stow_config.sh</code> will stow, and running <code>./stow_config.sh remove</code> will unstow the listed packages.</p>
<p>That&#x27;s it! glhf</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/coding">Coding</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/configuration">Configuration</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/productivity">Productivity</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">Linux</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Developing from a VM is great, but there&#x27;s a problem when you have to run an emulator inside of it. My solution is to have two separate virtual machines running in VirtualBox on the host OS, and let them communicate using networking."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/developing-on-android-emulator-from-virtualbox">How to connect to an Android Emulator from VirtualBox</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-02-24T00:00:00.000Z" itemprop="datePublished">February 24, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">​</a></h2>
<p>If you&#x27;re like me, you try and keep all of your coding-based clutter on a virtual machine. Which usually works great. You can maintain a clean OS, separate work from pleasure, and quickly return to a snapshot if something goes terribly wrong. But when I tried doing development for Android from a virtual machine, I quickly arrived at an unexpected hurdle.</p>
<p>If you try and run <a href="https://developer.android.com/studio" target="_blank" rel="noopener noreferrer">Android Studio</a>&#x27;s emulators, you&#x27;ll quickly be reminded that you can&#x27;t simply run a virtual machine inside a virtual machine. You technically can, if you enable <em>Nested VT-x/AMD-V</em>, but even if you succeed navigating the hell of starting an AVD android emulator from inside your VM, you&#x27;d be met by the huge performance hit of running nested virtualisation.</p>
<p>You can instead consider running either the <a href="https://www.genymotion.com/" target="_blank" rel="noopener noreferrer">Genymotion emulator</a> or <a href="https://xamarin.com/android-player" target="_blank" rel="noopener noreferrer">Xamarin Android Player</a>, which both use Oracle&#x27;s <a href="https://www.virtualbox.org/" target="_blank" rel="noopener noreferrer">VirtualBox</a> to run their emulators. But instead of running them inside your VM (and being met with the issue of nested virtualisation), you can run these emulators on your host OS. Since both of these use VirtualBox, <strong>you can take full use of the networking aspect of VMs to connect your development VM to your Android emulator VM!</strong></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Hence, my solution is to have two separate virtual machines running in VirtualBox on the host OS, and let them communicate using networking.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h2>
<p>I&#x27;m assuming you&#x27;ve already</p>
<ol>
<li>Downloaded and installed VirtualBox</li>
<li>Set up a development VM inside of VirtualBox</li>
<li>Connected your dev VM to the outside world using either <em>NAT</em> or <strong>Bridged</strong> networking (I personally use bridged, since it helps me to easier access any web dev instances running in the VM)</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-virtual-device">Creating a virtual device<a href="#creating-a-virtual-device" class="hash-link" aria-label="Direct link to Creating a virtual device" title="Direct link to Creating a virtual device">​</a></h3>
<p>Alrighty, now we can download and install either <a href="https://www.genymotion.com/" target="_blank" rel="noopener noreferrer">Genymotion emulator</a> or <a href="https://xamarin.com/android-player" target="_blank" rel="noopener noreferrer">Xamarin Android Player</a> on your host OS.</p>
<p>After you&#x27;ve done that, you can start up your software, and set up a virtual device (phone) by following the instructions.</p>
<p><img loading="lazy" alt="created virtual device" src="/assets/images/genymotion-devices-dff12f90942a44990988d4a6c83d5b10.png" width="1532" height="386" class="img_ev3q"></p>
<p>Now we need to do some configuration work inside VirtualBox.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-virtual-mobile-device">Configuring the virtual mobile device<a href="#configuring-the-virtual-mobile-device" class="hash-link" aria-label="Direct link to Configuring the virtual mobile device" title="Direct link to Configuring the virtual mobile device">​</a></h3>
<p>If you open up VirtualBox, you&#x27;ll see that the newly created virtual mobile device is listed in the list of machines.</p>
<p><img loading="lazy" alt="list virtual devices" src="/assets/images/virtualbox-list-3b5a3c220f06e055963a16f93a8ba98b.png" width="976" height="678" class="img_ev3q"></p>
<p>We need to edit the network settings for the mobile device. It will need two adapters. One is to connect to the network of the development machine (NAT or Bridged). In my case the machines are in a bridged network, which makes it easier to access from the host OS, as well as between each-other.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>For some development platforms like React-Native, it&#x27;s important that both the dev machine and mobile device are on the same network to allow easy debugging.</p></div></div>
<p><img loading="lazy" alt="mobile bridged adapter" src="/assets/images/virtualbox-network-1-6dd7ab0921133098dea8f8e96abd2748.png" width="634" height="476" class="img_ev3q"></p>
<p>The other, arguably more important adapter to add/enable is the <strong>Host-only Adapter</strong>. This is the one <a href="https://developer.android.com/studio/command-line/adb" target="_blank" rel="noopener noreferrer">adb</a> will connect over.</p>
<p><img loading="lazy" alt="mobile host-only adapter" src="/assets/images/virtualbox-network-2-5f94bf500d023db6843b5d7a24a0c9c6.png" width="629" height="475" class="img_ev3q"></p>
<p><strong>Make note of the adapter <em>name</em> here!</strong></p>
<p>VirtualBox has the habit of creating multiple host-only adapters, so this name is very important to make note of.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-development-vm">Configuring the development VM<a href="#configuring-the-development-vm" class="hash-link" aria-label="Direct link to Configuring the development VM" title="Direct link to Configuring the development VM">​</a></h3>
<p>Now that we have set the mobile device settings up, we need to mirror them in the develpment VM. If you&#x27;ve used NAT for the mobile device, redo the settings in the development one. If you&#x27;ve put it into a bridged network, do the same to the dev VM.</p>
<p>After this, we need to add a <em>Host-only Adapter</em> to the dev VM. Did you take note of the Adapter name from the mobile machine? This is where you use it!</p>
<p><img loading="lazy" alt="dev machine host-only adapter" src="/assets/images/virtualbox-network-3-bcd4db9880a0523c14773659a107589e.png" width="627" height="479" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="starting-up-the-machines">Starting up the machines<a href="#starting-up-the-machines" class="hash-link" aria-label="Direct link to Starting up the machines" title="Direct link to Starting up the machines">​</a></h3>
<p>Normally, you just start them from their respective applications. Start the mobile machine from Xamarin or Genymotion, and start your dev VM from VirtualBox.</p>
<p>But I&#x27;ve found that if I start the mobile machine from Genymotion, it tends to reset the Host-only Adapter name, add a new one, and fail to start. So, if this happens to you, this is what I do:</p>
<ol>
<li>Start the mobile machine from VirtualBox. A command-line terminal will pop up, and will start loading.</li>
<li>When it appears that the terminal isn&#x27;t doing anything anymore, you can safely start the mobile device from Genymotion.</li>
</ol>
<p><img loading="lazy" alt="mobile device ready to be started from genymotion" src="/assets/images/genymotion-starting-674dbd0fa7a84a0f0770ed922ddb540a.png" width="721" height="468" class="img_ev3q"></p>
<p>This is how my terminal looks when it stops loading. At this stage, I start the device from Genymotion as normal.</p>
<p>If you haven&#x27;t already, you can now start your development VM as well.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connecting-to-the-mobile-device">Connecting to the mobile device<a href="#connecting-to-the-mobile-device" class="hash-link" aria-label="Direct link to Connecting to the mobile device" title="Direct link to Connecting to the mobile device">​</a></h3>
<p>In this scenario, we are going to use <code>adb</code> to connect to the mobile device from the dev VM. All we need is the IP that the device is running on. Both Genymotion and Xamarin provide some way to see the IP.</p>
<p><img loading="lazy" alt="genymotion shows ip" src="/assets/images/adb-ip-1-97587394079d4bdffd667180ea1917b3.png" width="605" height="81" class="img_ev3q"></p>
<p>But if you&#x27;re having trouble to find it, you can go to VirtualBox, and see the IP from the terminal we saw earlier.</p>
<p><img loading="lazy" alt="virtualbox shows ip" src="/assets/images/adb-ip-2-72e0b5031a51946d799118c103e50e00.png" width="721" height="468" class="img_ev3q"></p>
<p>So, now we can easily connect from our dev VM using the command-line tool <code>adb</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kblagoev@deva:~/Android/Sdk/platform-tools$ ./adb connect 192.168.68.101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* daemon not running; starting now at tcp:5037</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* daemon started successfully</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">connected to 192.168.68.101:5555</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kblagoev@deva:~/Android/Sdk/platform-tools$ </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="success">Success!<a href="#success" class="hash-link" aria-label="Direct link to Success!" title="Direct link to Success!">​</a></h2>
<p>And since I&#x27;ve used a bridged network, I can also easily do network connections between the two devices, which can be quite useful in some cases. So I recommend it, unless you have your own way of doing it.</p>
<p>Now you can develop! Have fun!</p>
<!-- -->
<!-- -->
<div class="alert alert--primary" role="alert"><div class="card__body"><p>Thank you for reading!</p><p>The information in this blog, as well as all the tools, apps and libraries I develop are currently open source.</p><p>I would love to keep it this way, and you can help!</p><p>You can buy me a coffee from here, which will go towards the next all-nighter I pull off!</p><a href="https://www.buymeacoffee.com/kblagoev" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-violet.png" class="bmac_qmhE" alt="Buy Me A Coffee"></a><p>Or you can support me and my code monthly over at <a href="https://github.com/sponsors/tihawk" target="_blank">Github Sponsors!</a></p><p>Thanks!</p></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/coding">Coding</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/programming">Programming</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/v-ms">VMs</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/android">Android</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Reading is an integral part of writing."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/how-to-remember-what-i-was-reading-about">How to remember what I was reading about?</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-11-01T00:00:00.000Z" itemprop="datePublished">November 1, 2022</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote>
<p>Reading is an integral part of writing.</p>
</blockquote>
<p>There are many ways this statement can be phrased, but it carries the message accross. Before creating something new and original, we need to have information in the context of the thing we&#x27;re trying to create.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/getting-started">Getting Started</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/knowledge-management">Knowledge Management</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/research">Research</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/backlinks">Backlinks</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/search-engines">Search Engines</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/creativity">Creativity</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about How to remember what I was reading about?" href="/blog/how-to-remember-what-i-was-reading-about"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This is a writeup for the Key Mission challenge, part of the Hack the box&#x27;s Cyberapocalypse CTF 2021, category Forensics."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/key-mission-cyberapocalypse-2021-ctf">Key Mission - Cyberapocalypse 2021 CTF</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-04-30T00:00:00.000Z" itemprop="datePublished">April 30, 2021</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This is a writeup for the Key Mission challenge, part of the Hack the box&#x27;s Cyberapocalypse CTF 2021, category Forensics.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prompt">Prompt<a href="#prompt" class="hash-link" aria-label="Direct link to Prompt" title="Direct link to Prompt">​</a></h3>
<p>The secretary of earth defense has been kidnapped. We have sent our elite team on the enemy&#x27;s base to find his location. Our team only managed to intercept this traffic. Your mission is to retrieve secretary&#x27;s hidden location.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cyber-security">Cyber Security</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/ctf">CTF</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Key Mission - Cyberapocalypse 2021 CTF" href="/blog/key-mission-cyberapocalypse-2021-ctf"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This is a writeup for the Input as a Service challenge, part of the Hack the box&#x27;s Cyberapocalypse CTF 2021, category Misc."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/input-as-a-service-cyberapocalypse-2021-ctf">Input as a Service - Cyberapocalypse 2021 CTF</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-04-30T00:00:00.000Z" itemprop="datePublished">April 30, 2021</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This is a writeup for the Input as a Service challenge, part of the Hack the box&#x27;s Cyberapocalypse CTF 2021, category Misc.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prompt">Prompt<a href="#prompt" class="hash-link" aria-label="Direct link to Prompt" title="Direct link to Prompt">​</a></h3>
<p>In order to blend with the extraterrestrials, we need to talk and sound like them. Try some phrases in order to check if you can make them believe you are one of them.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cyber-security">Cyber Security</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/ctf">CTF</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Input as a Service - Cyberapocalypse 2021 CTF" href="/blog/input-as-a-service-cyberapocalypse-2021-ctf"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This is a writeup for the BlitzProp challenge, part of the Hack the box&#x27;s Cyberapocalypse CTF 2021, category Web."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/blitzprop-cyberapocalypse-2021-ctf">BlitzProp - Cyberapocalypse 2021 CTF</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-04-30T00:00:00.000Z" itemprop="datePublished">April 30, 2021</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This is a writeup for the BlitzProp challenge, part of the Hack the box&#x27;s Cyberapocalypse CTF 2021, category Web.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prompt">Prompt<a href="#prompt" class="hash-link" aria-label="Direct link to Prompt" title="Direct link to Prompt">​</a></h3>
<p>A tribute page for the legendary alien band called BlitzProp!</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cyber-security">Cyber Security</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/ctf">CTF</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about BlitzProp - Cyberapocalypse 2021 CTF" href="/blog/blitzprop-cyberapocalypse-2021-ctf"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This is a writeup for the CaaS challenge, part of the Hack the box&#x27;s Cyberapocalypse CTF 2021, category Web."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/caas-cyberapocalypse-2021-ctf">CaaS - Cyberapocalypse 2021 CTF</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-04-30T00:00:00.000Z" itemprop="datePublished">April 30, 2021</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tihawk.png" alt="Kiril Panayotov Blagoev" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kiril Panayotov Blagoev</span></a></div><small class="avatar__subtitle" itemprop="description">Admin</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This is a writeup for the CaaS challenge, part of the Hack the box&#x27;s Cyberapocalypse CTF 2021, category Web.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prompt">Prompt<a href="#prompt" class="hash-link" aria-label="Direct link to Prompt" title="Direct link to Prompt">​</a></h3>
<p>cURL As A Service or CAAS is a brand new Alien application, built so that humans can test the status of their websites. However, it seems that the Aliens have not quite got the hang of Human programming and the application is riddled with issues.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cyber-security">Cyber Security</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/ctf">CTF</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about CaaS - Cyberapocalypse 2021 CTF" href="/blog/caas-cyberapocalypse-2021-ctf"><b>Read More</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Random</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/flowfield">Flowfield</a></li><li class="footer__item"><a class="footer__link-item" href="/vicsek">Vicsek model</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/kiro_blagoev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/kblagoev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/tihawk" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Feed</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kblagoev.com/blog/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://kblagoev.com/blog/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Kiril Panayotov Blagoev</div></div></div></footer></div>
</body>
</html>